{
    "componentChunkName": "component---src-templates-page-index-js",
    "path": "/11-webpack-part-3",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Webpack (part-3)","desc":"html-loader, file-loader, clean-webpack in webpack part-3","banner":{"sharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQoz42Su24TQRSG8wA0FIBl72V257Ze24nBOEEkESlMFGFLKFxSESkVpKNwFSlEUFCBuBTQIMEbINFQQIEoeAle5kNndp1EwhEUv/bsmZnvXBdc6pgnK9/E4lSBiW2Q2OKzZ7wRLcyFCah+mF+MWMx9kNizQOHO/wKPM4w1a1t38S8+B4ktvn9mOC+aiQ3dvGD9w3fKdz+DxBafnP1V0VlAr0Qek1h6uk32+iv5mx9BYovvNLDKtmqPaGEG04nGRBrVsKhWRt60+Ngw3LzDytsvQWL7WOOUx8YOH1naNbzi2CpDga2Yayz1hmyOSsZXRgyu9yhNhzLS9DIfVCaaruuSRRku0ixNl7mw0cdeMjgl0LpkKa9vCqbb63w7WOXl/g4Hu8sUlz3OtDGRCWvjs4I8yRn3xxxOnvDw05itZz3KGlb3UHbMUWrF0aMhr/a2eb4/4nBnRH61gzMel5wMII9z7g3u8/jGlN9PFbw/x96GotXwFMpWQGlmEVsmaxozGDIZ9ji6pXFNE3p1enA2tfjU08kW+bjb4NeD89y0CiU9lR5WqVZQ1XQkDc3tQcpqOyONfLhk6yU/hiYWHRt0XC15PmMkdckBmkjkam3Slg+X/ewstXN3rvo/gcmU/wCsaXHy6OC23wAAAABJRU5ErkJggg==","aspectRatio":1.661764705882353,"src":"/static/46f75bca4f262428c272c110a7e1f095/62b1f/11-webpack-part-3.png","srcSet":"/static/46f75bca4f262428c272c110a7e1f095/e7519/11-webpack-part-3.png 113w,\n/static/46f75bca4f262428c272c110a7e1f095/7e7e9/11-webpack-part-3.png 225w,\n/static/46f75bca4f262428c272c110a7e1f095/62b1f/11-webpack-part-3.png 450w,\n/static/46f75bca4f262428c272c110a7e1f095/e2e7f/11-webpack-part-3.png 675w,\n/static/46f75bca4f262428c272c110a7e1f095/db955/11-webpack-part-3.png 900w,\n/static/46f75bca4f262428c272c110a7e1f095/31987/11-webpack-part-3.png 1000w","srcWebp":"/static/46f75bca4f262428c272c110a7e1f095/b8a88/11-webpack-part-3.webp","srcSetWebp":"/static/46f75bca4f262428c272c110a7e1f095/3a3bf/11-webpack-part-3.webp 113w,\n/static/46f75bca4f262428c272c110a7e1f095/975bf/11-webpack-part-3.webp 225w,\n/static/46f75bca4f262428c272c110a7e1f095/b8a88/11-webpack-part-3.webp 450w,\n/static/46f75bca4f262428c272c110a7e1f095/761da/11-webpack-part-3.webp 675w,\n/static/46f75bca4f262428c272c110a7e1f095/210c1/11-webpack-part-3.webp 900w,\n/static/46f75bca4f262428c272c110a7e1f095/e30b5/11-webpack-part-3.webp 1000w","sizes":"(max-width: 450px) 100vw, 450px"}}}},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Webpack (part-3)\",\n  \"slug\": \"/11-webpack-part-3\",\n  \"date\": \"2019-03-17T00:00:00.000Z\",\n  \"desc\": \"html-loader, file-loader, clean-webpack in webpack part-3\",\n  \"cover\": {\n    \"img\": \"../../../photos/11-webpack-part-3.png\"\n  },\n  \"banner\": \"../../banners/11-webpack-part-3.png\",\n  \"tags\": [\"Webpack\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", {\n    className: \"first-letter\"\n  }, \"I\"), \"n \", mdx(LinkPost, {\n    href: \"10-webpack-part-2\",\n    name: \"previous blog \\u2397\",\n    mdxType: \"LinkPost\"\n  }), \", we have discussed on Cache Busting and plugins, Splitting dev and production. \"), mdx(\"p\", null, \"Now we will start learning interesting part of webpack which is:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Html-loader\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"File-loader\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Clean-webpack\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Multiple Entrypoints & Vendor.js\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Extract CSS & Minify HTML/CSS/JS\")), mdx(\"h2\", null, \"1\\uFE0F\\u20E3 Html-loader \\u21BA\"), mdx(\"p\", null, \"For images, when you use same img file structure for dev and prod. You will get issue as the images are not loading in prod well. To fix that install \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"html-loader\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ npm install \\u2014save-dev html-loader\\n\")), mdx(\"u\", null, \"webpack.config.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"// include in module rules\\n{\\n  test: /\\\\.html$/,\\n  use: [\\\"html-loader\\\"] \\n}\\n\")), mdx(\"p\", null, \"When you run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run prod\"), \", you get error as:\"), mdx(\"p\", {\n    className: \"error\"\n  }, \"unexpected token, you may need an appropriate loader to handle this file type.\"), mdx(\"p\", null, \"To fixed the error, need \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"file-loader\"), \".\"), mdx(\"h2\", null, \"2\\uFE0F\\u20E3 File-loader \\uD83D\\uDDC2\"), mdx(\"p\", null, \"To Install File loader:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ npm install --save-dev file-loader\\n\")), mdx(\"u\", null, \"webpack.config.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const path = require(\\\"path\\\")\\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\\n\\nmodule.exports = \\n  { \\n    entry: \\\"./src/index.js\\\",\\n    plugins: [\\n        new HtmlWebpackPlugin({ \\n            template: \\\"./src/main.html\\\"\\n        })\\n    ],\\n    module: { \\n        rules: [{ \\n            // files which ends with .css use the below loader \\n            test: /\\\\.scss$/,\\n            use: [\\n                \\\"style-loader\\\", // 3rd. style loader inject styles into DOM\\n                \\\"css-loader\\\", // 2nd. CSS loader turns css into common JS\\n                \\\"sass-loader\\\" //1st. SASS loader which turns sass into CSS\\n            ]\\n        }],\\n        {\\n            test: /\\\\.html$/,\\n            use: [\\\"html-loader\\\"] \\n        },  \\n        {\\n            test: /\\\\.(svg|png|jpg|gif)$/,\\n            use: { \\n                loader: \\\"file-loader\\\",\\n                options: { \\n                    name: \\\"[name].[hash].[ext]\\\",\\n                    outputPath: \\\"images\\\" \\n                }\\n            }\\n        }\\n    }}\\n\")), mdx(\"p\", null, \"Now run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run prod\"), \", it will create images as folder inside dist and all jpg/png/svg files will be copied there.\"), mdx(\"h2\", null, \"3\\uFE0F\\u20E3 Clean-webpack \\uD83E\\uDDF9\"), mdx(\"p\", null, \"Whenever you do some changes in file, it will create new hash file. You will install \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"clean-webpack\"), \" plugin which will delete \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dist\"), \" directory everytime you build.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ npm install --save-dev clean-webpack-plugin\\n\")), mdx(\"p\", null, \"Use it in production file, for dev its not needed.\"), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const path = require(\\\"path\\\")\\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\\nconst common = require('./webpack-config');\\nconst merge = require('webpack-merge');\\nconst {CleanWebpackPlugin} = require(\\\"clean-webpack-plugin\\\");\\n\\nmodule.exports = \\n  merge(common, { \\n    mode : \\\"production\\\",\\n    output: \\n      { \\n         filename: \\\"hello.[contentHash].js\\\", \\n         path.resolve(__dirname, \\\"New_folder_name\\\") } }\\n      },\\n    plugins: [ new CleanWebpackPlugin() ]\\n})\\n\")), mdx(\"h2\", null, \"4\\uFE0F\\u20E3 Multiple Entrypoints & Vendor.js \\u2A31\"), mdx(\"p\", null, \"If you want to have multiple entry point then we can do it with below following steps:\"), mdx(\"p\", null, \"Create a file in src folder.\"), mdx(\"p\", null, \"Example: vendor.js\"), mdx(\"p\", null, \"Change Output section in both dev and prod.js:\"), mdx(\"u\", null, \"webpack.dev.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"output: {\\n    filename: \\\"[name].bundle.js\\\"\\n}\\n\")), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"output: {\\n    filename: \\\"[name].[constentHash].bundle.js\\\"\\n}\\n\")), mdx(\"u\", null, \"webpack.config.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"module.exports = {\\n  entry: {\\n     main: \\\"./src/index.js\\\",\\n     vendor: \\\"./src/vendor.js\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"Now by running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm start\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run prod\"), \", it will create two file name as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"main.bundle.js\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vendor.bundle.js\"), \".\"), mdx(\"h2\", null, \"5\\uFE0F\\u20E3 Extract CSS & Minify HTML/CSS/JS \\uD83D\\uDC7D\"), mdx(\"mark\", null, \"Extract CSS:\"), \"It will be great you can have separate js file and css file in production. Currently everything is happening in one js file only. In production, you need CSS to load first. As JS may take some second to load. It can be doable using plugin called `mini-css-extract-plugin`.\", mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ npm install \\u2014save-dev mini-css-extract-plugin\\n\")), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"// Add into the plugins:\\nconst MiniCssExtractPlugin = require(\\\"mini-css-extract-plugin\\\")\\nplugins: [ \\n    new MiniCssExtractPlugin({\\n        filename: \\\"[name].[chunkHash].css\\\"\\n    })\\n    new CleanWebpackPlugin()\\n]\\n\")), mdx(\"p\", null, \"You have to make sure, that you are using above snippet instead of style loader in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webpack.config.js\")), mdx(\"u\", null, \"webpack.dev.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const path = require(\\\"path\\\")\\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\\nconst common = require('./webpack-config');\\nconst merge = require('webpack-merge');\\n\\nmodule.exports = \\n    merge(common ,{ \\n       mode : \\\"development\\\",\\n       output: { \\n           filename: \\\"[name].bundle.js\\\",\\n           path.resolve(__dirname, \\\"New_folder_name\\\") } }\\n       },\\n       module: { \\n           rules: [{ \\n               // files which ends with .css use the below loader \\n               test: /\\\\.scss$/,\\n               use: [\\n                   \\\"style-loader\\\", // 3rd. style loader inject styles into DOM\\n                   \\\"css-loader\\\", // 2nd. CSS loader turns css into common JS\\n                   \\\"sass-loader\\\" //1st. SASS loader which turns sass into CSS\\n               ]\\n           }]\\n       }\\n    })\\n\")), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const path = require(\\\"path\\\")\\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\\nconst common = require('./webpack-config');\\nconst merge = require('webpack-merge');\\nconst CleanWebpackPlugin = require(\\\"clean-webpack-plugin\\\");\\nconst MiniCssExtractPlugin = require(\\\"mini-css-extract-plugin\\\")\\n\\nmodule.exports = \\n  merge(common, { \\n    mode : \\\"production\\\",\\n    output: { \\n        filename: \\\"[name].[constentHash].bundle.js\\\",\\n        path.resolve(__dirname, \\\"New_folder_name\\\") } }\\n    },\\n    plugins: [ \\n        new MiniCssExtractPlugin({\\n            filename: \\\"[name].[chunkHash].css\\\"\\n       })\\n       new CleanWebpackPlugin() \\n    ],\\n    module: { \\n        rules: [{ \\n            // files which ends with .css use the below loader \\n            test: /\\\\.scss$/,\\n            use: [\\n               \\\"MiniCssExtractPlugin.loader\\\", // 3rd. Move CSS into files\\n               \\\"css-loader\\\", // 2nd. CSS loader turns css into common JS\\n               \\\"sass-loader\\\" //1st. SASS loader which turns sass into CSS\\n            ]\\n        }]\\n     }\\n})\\n\")), mdx(\"u\", null, \"webpack.config.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const path = require(\\\"path\\\")\\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\\n\\nmodule.exports = \\n  { \\n    entry: \\\"./src/index.js\\\",\\n    plugins: [\\n      new HtmlWebpackPlugin({ \\n        template: \\\"./src/main.html\\\"\\n      })\\n    ],\\n    module: { \\n        rules: [{ \\n            test: /\\\\.html$/,\\n            use: [\\\"html-loader\\\"] \\n        },  \\n        {\\n            test: /\\\\.(svg|png|jpg|gif)$/,\\n            use: { \\n                loader: \\\"file-loader\\\",\\n                options: { \\n                    name: \\\"[name].[hash].[ext]\\\",\\n                    outputPath: \\\"images\\\"\\n                }\\n            }\\n        }\\n    }\\n  }\\n\")), mdx(\"p\", null, \"Now, by running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run prod\"), \", you will get css file as well in dist folder.\"), mdx(\"h3\", null, mdx(\"mark\", null, \"Minify CSS:\")), mdx(\"p\", null, \"To minify the css you used the plugin called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"optimize-css-assets-webpack-plugin\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ npm install \\u2014save-dev optimize-css-assets-webpack-plugin\\n\")), mdx(\"p\", null, mdx(\"b\", null, \"NOTE:\"), \" You just need to minify the CSS in production\"), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"// (To compile CSS)\\nconst OptimizeCssAssestsPlugin = require('optimize-css-assets-webpack-plugin');\\n// we add new property here called optimization\\noptimization: {\\n    minimizer: new OptimizeCssAssestsPlugin()\\n}\\n\")), mdx(\"p\", null, \"By default the JS will be optimized, but when you run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run prod\"), \" here the CSS will get optimised and JS will not be optimised longer. It\\u2019s because you are overwriting the optiomization above.\"), mdx(\"p\", null, \"To fix that you have to add optimization for JS as well.\"), mdx(\"h3\", null, mdx(\"mark\", null, \"Minify JS:\")), mdx(\"p\", null, \"For JS minifier you will be using TerserPlugin, which has installed by default.\"), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const TerserPlugin = require('terser-webpack-plugin');\\noptimization: {\\n    minimizer: [new OptimizeCssAssestsPlugin(), newTerserPlugin()]\\n}\\n\")), mdx(\"h3\", null, mdx(\"mark\", null, \"Minify HTML:\")), mdx(\"p\", null, \"You are not going to use any new plugin for HTML minifiation.\"), mdx(\"u\", null, \"webpack.config.js:\"), mdx(\"p\", null, \"Remove HTMLWebpackPlugin from plugins.\"), mdx(\"u\", null, \"webpack.dev.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const HtmlWebpackPlugin = require('html-webpack-plugin');\\n// add plugins here as:\\n\\nplugins: [\\n    new HtmlWebpackPlugin ({template: \\\"./src/template.html\\\"})\\n]\\n\")), mdx(\"u\", null, \"webpack.prod.js:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const path = require(\\\"path\\\");\\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\\nconst common = require('./webpack-config');\\nconst merge = require('webpack-merge');\\nconst CleanWebpackPlugin = require(\\\"clean-webpack-plugin\\\");\\nconst MiniCssExtractPlugin = require(\\\"mini-css-extract-plugin\\\");\\nconst TerserPlugin = require('terser-webpack-plugin');\\n\\nmodule.exports = \\n  merge(common, { \\n    mode : \\\"production\\\",\\n    output: { \\n        filename: \\\"[name].[constentHash].bundle.js\\\",\\n        path.resolve(__dirname, \\\"New_folder_name\\\") } }\\n    },\\n    optimization: {\\n        minimizer: [new OptimizeCssAssestsPlugin(), newTerserPlugin(),\\n        new HtmlWebpackPlugin ({\\n           template: \\\"./src/template.html\\\",\\n           minify: {\\n             removeAtrributeQuotes: true,\\n             collapseWhiteSpace: true,\\n             removeComments: true\\n           }\\n        })\\n       ]\\n     },\\n      plugins: [ \\n       new MiniCssExtractPlugin({\\n        filename: \\\"[name].[chunkHash].css\\\"\\n       }),\\n       new CleanWebpackPlugin() \\n     ],\\n     module: { \\n        rules: [{ \\n           // files which ends with .css use the below loader \\n           test: /\\\\.scss$/,\\n           use: [\\n             \\\"MiniCssExtractPlugin.loader\\\", // 3rd. Move CSS into files\\n             \\\"css-loader\\\", // 2nd. CSS loader turns css into common JS\\n             \\\"sass-loader\\\" //1st. SASS loader which turns sass into CSS\\n           ]\\n        ]}\\n     }\\n})\\n\")), mdx(\"p\", null, \"Now, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run prod\"), \" and you can see in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dist/index.html\"), \", you don\\u2019t have any comments and white spaces. The code will get minified.\"), mdx(\"p\", null, \"Check out the summary via below diagram \\uD83E\\uDD73\"), mdx(ImgPost, {\n    src: WebpackSummary,\n    alt: \"Webpack summary tag\",\n    width: \"50\",\n    margin: \"4rem auto\",\n    mdxType: \"ImgPost\"\n  }), mdx(\"p\", null, \"I hope you found this blog helpful \\u2665\\uFE0F, If you have any question please reach out to me on \", mdx(LinkPost, {\n    href: \"https://twitter.com/suprabhasupi\",\n    name: \"@suprabhasupi\",\n    mdxType: \"LinkPost\"\n  }), \" \\uD83D\\uDE0B\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/11-webpack-part-3"}},
    "staticQueryHashes": ["1691836396"]}